<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Basic Types - Linnaeus</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Basic Types";
    var mkdocs_page_input_path = "basic_types.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Linnaeus</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../quick_tutorial/">Quick Tutorial</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Basic Types</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#basic-types">Basic Types</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#algorithms">Algorithms</a></li>
        
            <li><a class="toctree-l3" href="#variables">Variables</a></li>
        
            <li><a class="toctree-l3" href="#parameters">Parameters</a></li>
        
            <li><a class="toctree-l3" href="#oracles">Oracles</a></li>
        
            <li><a class="toctree-l3" href="#update-equations">Update equations</a></li>
        
            <li><a class="toctree-l3" href="#warning">Warning!</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../detection/">Detection</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../examples/">Examples</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Linnaeus</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Basic Types</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="basic-types">Basic Types</h1>
<p>The major building block is called an algorithm. An algorithm is defined with 
variables, parameters, functions, oracles, and update equations. 
All the expressions in Linnaeus are defined symbolically using SymPy. </p>
<h2 id="algorithms">Algorithms</h2>
<p>Algorithm is defined using keyword <code>Algorithm</code>
along with the name of the algorithm. </p>
<p>The following code defines an <code>Algorithm</code> as <code>new_algo</code> named <code>my new algorithm</code>.</p>
<pre><code class="python">new_algo = Algorithm(&quot;my new algorithm&quot;)
</code></pre>

<p>Expressions such as variables, parameters, functions, oracles, and update equations 
are all attributes to an algorithm object. 
An algorithm must be defined before other expressions are defined and added to it. </p>
<h2 id="variables">Variables</h2>
<p>Variables are algorithm states. They are declared and added to an algorithm
using syntax <code>add_var</code> along with the names of the variables. </p>
<p>In the following example, we add variables <code>x1</code> and <code>x2</code> to <code>new_algo</code>.</p>
<pre><code class="python">x1, x2 = new_algo.add_var(&quot;x1&quot;, &quot;x2&quot;)
</code></pre>

<p>Each algorithm state (each variable) must be updated at each iteration. The
updated variables can be accessed by syntax <code>update</code>. </p>
<p>Here we access the updated <code>x1</code> with <code>x1u</code> and updated <code>x2</code> with <code>x2u</code> in the following code. </p>
<pre><code class="python">x1u, x2u = new_algo.update(x1, x2)
</code></pre>

<h2 id="parameters">Parameters</h2>
<p>Parameters of an algorithm can be declared as scalar (commutative) or vector or matrix (noncommutative). 
Parameters are declared and added to an algorithm using syntax <code>add_parameter</code> along with the names of parameters. 
To add a vector or matrix, the argument <code>commutative</code> should be set as <code>False</code>. 
The default setting of argument <code>commutative</code> is <code>True</code>. 
There is no need to specialize the dimensions of vectors or matrices, since they are symbolic. </p>
<p>The following code shows how to add scalar <code>t</code> and matrix <code>L</code> to <code>new_algo</code>.</p>
<pre><code class="python">t = new_algo.add_parameter(&quot;t&quot;)
L = new_algo.add_parameter(&quot;L&quot;, commutative = False)
</code></pre>

<h2 id="oracles">Oracles</h2>
<p>Linnaeus provides two approaches to declare and add oracles 
to an algorithm. </p>
<h4 id="black-box-approach">Black-box approach</h4>
<p>The black-box approach is to define oracles as black boxes. 
When parsing the algorithm, the system treats each oracle as a distinct entity unrelated to any other oracle. 
An oracle declared using syntax <code>add_oracle</code> uses the black-box approach</p>
<p>For example, we declare oracles gradient of <code>f</code> and proximal operator of <code>g</code> with the following code.</p>
<pre><code class="python">gradf = new_algo.add_oracle(&quot;gradf&quot;)
proxg = new_algo.add_oracle(&quot;proxg&quot;)
</code></pre>

<h4 id="functional-approach">Functional approach</h4>
<p>The functional approach is to define oracles in terms of the (sub)gradient of a function. 
When parsing an algorithm, all the oracles will be decomposed into (sub)gradients. 
This approach is important to allow detection algorithm conjugation. 
This <a href="https://linnaeus-doc.github.io/examples/#check-conjugation-and-permutation-douglas-rachford-splitting-and-admm">example</a> shows the details. 
With the functional approach, functions must be defined and added to the algorithm 
using syntax <code>add_function</code> before defining oracles.</p>
<p>The following example shows to define function <code>f</code> and add it to <code>new_algo</code></p>
<pre><code class="python">f = new_algo.add_function(&quot;f&quot;)
</code></pre>

<p>Linnaeus provides four types of oracles that can be decomposed into (sub)gradients, </p>
<ul>
<li>Gradient with syntax <code>grad</code></li>
<li>Proximal operator with syntax <code>prox</code></li>
<li>Projection with syntax <code>proj</code></li>
<li>Argmin operator with syntax <code>argmin</code></li>
</ul>
<pre><code class="python">import linnaeus as lin
# gradient of f with respect to x1 
lin.grad(f)(x1)
# proximal operator of f with respect to x2 and parameter t 
lin.prox(f,t)(x2)
# projection x1 onto set C
lin.proj(C)(x1)
# argmin of f(x) + g(x)
lin.argmin(x, f(x) + g(x))
</code></pre>

<p>To use the projection oracle, a set must be declared in advance with syntax <code>add_set</code>. </p>
<h2 id="update-equations">Update equations</h2>
<p>Update equations define the iterative procedures of an algorithm. All the update equations have common 
structure that an updated variable equals an expression of variables, parameters, and oracles. 
An update equation is defined with syntax <code>add_update</code>. </p>
<pre><code class="python">new_algo.add_update(x1, x2 - gradf(x2)) 
new_algo.add_update(x2, x1 + proxg(x1)) 
</code></pre>

<p>The update equations in the above example are interpreted as </p>
<p><img src="/Figures/interpretation1.svg?invert_in_darkmode" align=middle width="140" height="140"/></p>
<p>Or interpreted as equalities, </p>
<p><img src="/Figures/interpretation2.svg?invert_in_darkmode" align=middle width="140" height="140"/></p>
<p>By default setting, variables which have already been updated will be substituted with their
updated versions. Thus, <code>x1</code> in the second update equation is considered as the updated <code>x1</code>, as the <code>x1^+</code> in 
the second equality interpretation. </p>
<p>For some cases, we can change the default setting by syntax <code>set_auto</code>, such as </p>
<pre><code class="python">new_algo.set_auto(False)
new_algo.add_update(x1, x2 - gradf(x2)) 
new_algo.add_update(x2, x1 + proxg(x1)) 
</code></pre>

<p>Under this setting, we have a different interpretation of the update equations, </p>
<p><img src="/Figures/interpretation3.svg?invert_in_darkmode" align=middle width="140" height="140"/></p>
<h2 id="warning">Warning!</h2>
<p>To avoid overlap and misleading in expressions, it is highly recommanded that each algorithm should have its own variables, parameters, etc, and those expressions should only be used within this algorithm!</p>
<p>For example, </p>
<pre><code class="python">algo1 = Algorithm(&quot;my first algorithm&quot;)
x1, x2 = algo1.add_var(&quot;x1&quot;, &quot;x2&quot;)
t, h = algo1.add_parameter(&quot;t&quot;, &quot;h&quot;)
algo1.add_update(x1, x2 - t*x2)
algo1.add_update(x2, x1 - h*x2)

algo2 = Algorithm(&quot;my second algorithm&quot;)
x1, x2 = algo2.add_var(&quot;x1&quot;, &quot;x2&quot;)
t, h = algo2.add_parameter(&quot;t&quot;, &quot;h&quot;)
algo2.add_update(x1, x2 - h*x1)
algo2.add_update(x2, x1 - t*x2)
</code></pre>

<p>Variables <code>x1</code> and <code>x2</code>, parameters <code>t</code> and <code>h</code> are declared within the first algorithm <code>algo1</code>. They should only be used within <code>algo1</code>, such as the update equations of it. 
For the second algorithm <code>algo2</code>, if we still want to use variables <code>x1</code>, <code>x2</code>, and parameters <code>t</code>, <code>h</code>, they should be declared again within <code>algo2</code>.  </p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../detection/" class="btn btn-neutral float-right" title="Detection">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../quick_tutorial/" class="btn btn-neutral" title="Quick Tutorial"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../quick_tutorial/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../detection/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
